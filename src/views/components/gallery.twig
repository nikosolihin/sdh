{% set image = data.figure %}

{% if data.crop %}
  {# Square Image #}
  <figure class="{{'Figure'|modifiers("#{data.direction}")}}">
    <picture>
      <!--[if IE 9]><video style="display: none;"><![endif]-->
        <source media="(min-width: {{lg}})" data-srcset="{{image|serveSquareImage(400)}}">
        <source media="(min-width: {{md}})" data-srcset="{{image|serveSquareImage(400)}}">
        <source media="(min-width: {{sm}})" data-srcset="{{image|serveSquareImage(400)}}">
        <source data-srcset="{{image|serveSquareImage(400)}}">
      <!--[if IE 9]></video><![endif]-->
      {# Fallback with transparent LQIP #}
      <img alt="{{image.title}}" class="lazyload" data-src="{{image|serveSquareImage(400)}}" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
    </picture>
    <figcaption class="Figure-caption h6">
      {{data.caption}}
    </figcaption>
  </figure>
{% else %}
  {# Normal Image #}
  <figure class="{{'Figure'|modifiers("#{data.direction}")}}">
    <picture>
      <!--[if IE 9]><video style="display: none;"><![endif]-->
        <source media="(min-width: {{lg}})" data-srcset="{{image|serveImage(1024)}}">
        <source media="(min-width: {{md}})" data-srcset="{{image|serveImage(640)}}">
        <source media="(min-width: {{sm}})" data-srcset="{{image|serveImage(640)}}">
        <source data-srcset="{{image|serveImage(640)}}">
      <!--[if IE 9]></video><![endif]-->
      {# Fallback with transparent LQIP #}
      <img alt="{{image.title}}" class="lazyload" data-src="{{image|serveImage(640)}}" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==">
    </picture>
    <figcaption class="Figure-caption h6">
      {{data.caption}}
    </figcaption>
  </figure>
{% endif %}
